<script>
    import FeedbackForm from "./components/FeedbackForm.svelte";
    import FeedbackList from "./components/FeedbackList.svelte";
    import FeedbackStats from "./components/FeedbackStats.svelte";

    let feedbacks = [
        {
            id: 0,
            rating: 9,
            description: "This is the best product I have ever seen, this is amazin to the next level."
        },
        {
            id: 1,
            rating: 5,
            description: "Average to use product, comes with lots of ifs and buts. Does not recommend for children."
        },
        {
            id: 2,
            rating: 1,
            description: "Worst product so far from this company, do not use at all."
        }
    ];

    const submitRating = (event) => {
        const updatedFeedbacks = [...feedbacks, event.detail]
        feedbacks = updatedFeedbacks;
    }

    const deleteHandler = (event) => {
        console.log("event", event);
        const updatedFeedbacks = feedbacks.filter((fb) => fb.id!=event.detail.id)
        feedbacks = updatedFeedbacks;
    }
</script>

<div class="container">
    <FeedbackForm on:submit-rating={submitRating}/>
    <FeedbackStats />
    <FeedbackList on:delete-handler={(event) => deleteHandler(event)}/>
</div>
